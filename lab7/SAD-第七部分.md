## 7 数据库管理和设置

### 7.1 概述

本节内容与数据库功能无关，将从系统的数据库运行角度出发，对本数据库的属性设置和备份恢复策略提出指导性说明。

另外，我们在数据库的物理结构上还做了优化：数据库表设计满足 3NF，减少了冗余数据。表中的所有数据元素不但要能唯一地被主关键字所标识,而且它们之间还必须相互独立，不存在其他的函数关系接口。

### 7.2 数据库属性设置

![img](file:///C:/Users/14407/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg)

 

图4－11 数据库属性设置图

### 7.3 数据库备份恢复策略

​    目前的方案是使用定时脚本进行数据库的定期自动备份和事件清理。

  如果时间允许，我们考虑部署多台服务器，同时部署MariaDB Galera Cluster（MariaDB 同步多主机集群），实现主从备份，保证数据的稳定性。

- ##### MariaDB Galera Cluster 介绍

  MariaDB 集群是 MariaDB 同步多主机集群。它仅支持 XtraDB/ InnoDB 存储引擎（虽然有对 MyISAM 实验支持 - 看 wsrep_replicate_myisam 系统变量）。

  主要功能:

  - 同步复制
  - 真正的 multi-master，即所有节点可以同时读写数据库
  - 自动的节点成员控制，失效节点自动被清除
  - 新节点加入数据自动复制
  - 真正的并行复制，行级
  - 用户可以直接连接集群，使用感受上与MySQL完全一致

  优势:

  - 因为是多主，所以不存在Slavelag(延迟)
  - 不存在丢失事务的情况
  - 同时具有读和写的扩展能力
  - 更小的客户端延迟
  - 节点间数据是同步的,而 Master/Slave 模式是异步的,不同 slave 上的 binlog 可能是不同的

 

### 7.4 数据库运行日常维护

  数据库维护是指当一个数据库被创建以后的工作都叫做数据库维护。包括备份系统数据、恢复数据库系统、产生用户信息表，并为信息表授权、监视系统运行状况，及时处理系统错误、保证系统数据安全，周期更改用户口令，数据库维护比数据库的创建和使用更难。